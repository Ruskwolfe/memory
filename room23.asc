// room script file

function hangarexit1_WalkOn()
{
cEgo.ChangeRoom(22, 306, 169);
}

function room_AfterFadeIn()
{
SetTimer(2, 1);
cFat.Animate(0, 100, eRepeat, eNoBlock);
}

function oShip_Look()
{
Display("The shuttle looks beat up. You will need to do some welding and internal repair. And find a new canopy as well");
}

function oShip_Interact()
{
  if (shiphull == 1)
  {cEgo.ChangeRoom(24);
  }
  else
  {
Display("Atempting to press the button to open to ship runs into the problem that no such button exists.");
}
}

function oShip_Talk()
{
cEgo.Say("Hello....");
cFat.Say("Hi Reddy ?");
cEgo.FaceCharacter(cFat);
cEgo.Say("... I forgot you were here");
}

function oShip_UseInv()
{
  if (shiphull == 1)
  {Display("You already opened the sidepanel");
  }
  else
  {
  if (cEgo.ActiveInventory == ODrill)
  {
    cEgo.Walk(200, 193, eBlock, eWalkableAreas);
cEgo.FaceDirection(eDirectionDown);
cEgo.LockView(3);
cEgo.Animate(3, 5, eOnce, eBlock);
Wait(60);
cEgo.Animate(3, 5, eOnce, eBlock, eBackwards);
cEgo.LockView(1);
cEgo.FaceDirection(eDirectionDown);
cEgo.Say("That ought to do it");
shiphull = 1;
  }
  }
}

function oSpareParts_Look()
{
Display("This is where the spare parts are usually stored, since Johan became janitor though, it is usually full of half eaten snickers and empty grape soda cans.");
}

function oSpareParts_Interact()
{if (stucklocker1 == 3)
{
  cEgo.Walk(240, 138, eBlock, eWalkableAreas);
cEgo.FaceDirection(eDirectionUp);
cEgo.LockView(3);
cEgo.Animate(0, 5, eOnce, eBlock);
Wait(60);
cEgo.Animate(0, 5, eOnce, eBlock, eBackwards);
cEgo.LockView(1);
cEgo.FaceDirection(eDirectionDown);
cEgo.Say("Still fucking stuck");
cEgo.Say("FUUUUUUCK ! I suppose I better bring Johan a peace offering, maybe some diet coke");
cFat.FaceCharacter(cEgo);
cFat.Say("Diet sodas are full of nasty chemical, a normal soda, or an energy drink.... I mean.. I aint talking to you");
}
else if (stucklocker1 == 2)
{
  cEgo.Walk(240, 138, eBlock, eWalkableAreas);
cEgo.FaceDirection(eDirectionUp);
cEgo.LockView(3);
cEgo.Animate(0, 5, eOnce, eBlock);
Wait(60);
cEgo.Animate(0, 5, eOnce, eBlock, eBackwards);
cEgo.LockView(1);
cEgo.FaceDirection(eDirectionDown);
cEgo.Say("Still fucking stuck");
cEgo.Say("Guess I WILL have to find a soda for him");
}
else
{
cEgo.Walk(240, 138, eBlock, eWalkableAreas);
cEgo.FaceDirection(eDirectionUp);
cEgo.LockView(3);
cEgo.Animate(0, 5, eOnce, eBlock);
Wait(60);
cEgo.Animate(0, 5, eOnce, eBlock, eBackwards);
cEgo.LockView(1);
cEgo.FaceDirection(eDirectionDown);
cEgo.Say("The door appears to be stuck");
stucklocker1 = 1;
}
}

function hExit2_WalkOn()
{
cEgo.ChangeRoom(25, 13, 165);
}

function room_Load()
{
  if (currentMusic == 1)
  {
  }
  else
  {AudioChannel* chan1 = aCold_Sober.Play();
  chan1.Volume = 20;
  currentMusic = 1;
  }
  oSpareParts.SetView(49);
oSpareParts.Animate(1, 10, eRepeat, eNoBlock);
}

function room_RepExec()
{
  if (servo1 == 0)
  {
  if (IsTimerExpired(2)) {
   int skullz1 = Random(6);
    if (skullz1 == 0)
    cSkull.SayBackground("Praise the Emperor");
  else if (skullz1 == 1)
    cSkull.Walk(Random(320),Random(40), eNoBlock, eAnywhere);
  else if (skullz1 == 2)
    cSkull.SayBackground("*Mechanical Whirr*");
      else if (skullz1 == 3)
    cSkull.Walk(Random(320),Random(40), eNoBlock, eAnywhere);
  else if (skullz1 == 4)
    cSkull.SayBackground("Purge the Xenos Filth!");
      else if (skullz1 == 5)
    cSkull.Walk(Random(320),Random(40), eNoBlock, eAnywhere);
  else if (skullz1 == 6)
    cSkull.Walk(Random(320),Random(40), eNoBlock, eAnywhere);
    SetTimer(2, GetGameSpeed() * 10);  // ten seconds delay
  }
  }
 
}


function oPoster_Look()
{
  cEgo.Walk(62, 178, eBlock, eWalkableAreas);
  cEgo.FaceDirection(eDirectionUp, eBlock);
  Display("Maintenance prevents Accidents.");
}
